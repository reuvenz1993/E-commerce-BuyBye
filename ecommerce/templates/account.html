{% extends "layout.html" %}
{% block content %}

<link href="{{url_for('static',filename='css/account.css')}}" rel="stylesheet">



<div class="container">

  <div class="accordion" id="accordionExample275">
    <div class="card z-depth-0 bordered">
      <div class="card-header" id="headingOne2">
        <h5 class="mb-0">
          <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#collapseOne2"
            aria-expanded="true" aria-controls="collapseOne2">
            My details
          </button>
        </h5>
      </div>
      <div id="collapseOne2" class="collapse" aria-labelledby="headingOne2"
        data-parent="#accordionExample275">
        <div class="card-body">
            <h4 class="card-title">My Details</h4>
            <hr>
                    <div class="form-group row">
                        <label for="inputName" class="col-auto col-form-label">Full name :</label>
                        <div class="col-auto">
                            <input value="{{current_user.name}}" disabled type="text" class="form-control" name="name_input" id="name_input" placeholder="">
                        </div>
                      <div class="col-auto">
                          <button id='name_input_edit' type="submit" class="btn btn-primary">Edit</button>
                      </div>
                      <div class="col-auto">
                          <button id='name_input_confirm' type="submit" class="btn btn-primary" disabled>Confirm</button>
                      </div>
                    </div>

                    <div class="form-group row">
                      <label for="inputName" class="col-auto col-form-label">Address :</label>
                      <div class="col-auto">
                          <input  value="{{current_user.address}}" disabled type="text" class="form-control" name="address_input" id="address_input" placeholder="">
                      </div>
                    <div class="col-auto">
                        <button id='address_input_edit' type="submit" class="btn btn-primary">Edit</button>
                    </div>
                    <div class="col-auto">
                        <button id='address_input_confirm' type="submit" class="btn btn-primary" disabled>Confirm</button>
                    </div>
                    
                  </div>
          </div>
      </div>
    </div>
    <div class="card z-depth-0 bordered">
      <div class="card-header" id="headingTwo2">
        <h5 class="mb-0">
          <button class="btn btn-link collapsed" type="button" data-toggle="collapse"
            data-target="#collapseTwo2" aria-expanded="false" aria-controls="collapseTwo2">
            My Payment Methods 
          </button>
        </h5>
      </div>
      <div id="collapseTwo2" class="collapse" aria-labelledby="headingTwo2"
        data-parent="#accordionExample275">
        <div class="card-body">
        </div>
      </div>
    </div>
    <div class="card z-depth-0 bordered">
      <div class="card-header" id="headingThree2">
        <h5 class="mb-0">
          <button class="btn btn-link collapsed" type="button" data-toggle="collapse"
            data-target="#collapseThree2" aria-expanded="false" aria-controls="collapseThree2">
            My Orders
          </button>
        </h5>
      </div>
      <div id="collapseThree2" {% if focus_order %} class="collapse show" {% else %} class="collapse" {% endif %} aria-labelledby="headingThree2"
        data-parent="#accordionExample275">
        <div >
            <ul class="list-group">
                {% if current_user.orders %}
                {% for order in current_user.sorted_orders %}

                <li class="list-group-item" data-list_order_id="{{order.id}}">
                    <div class="justify-content-center row">
                        <h3> order id : {{order.id}} </h3>
                    </div>
                    <div class="row">
                        <div class="col product_img_col">
                            <img class='product_img' style="max-width: 125px;" src="{{order.product.picture}}" alt="">
                        </div>
                        <div class="col text-center">
                            <p>
                            Product name : {{order.product.name}}
                        </p>
                        <p>
                            Order date  : {{order.order_time.strftime("%d/%m/%y")}}
                        </p>
                        </div>
                        <div class="col text-center">
                          <p>
                            Qty: {{order.qty}}
                          </p>
                            <p>
                              Status : <span id="s{{order.id}}"> {{order.the_status.name}}  </span>
                            </p>
                            {% if order.shipment_time %}
                            <p>
                              Shipment date : {{order.shipment_time.strftime("%d/%m/%y")}}
                            </p>
                            <p>
                              Tracking number : {{order.tracking_number}}
                            </p>
                            {% endif %}
                        </div>
                        {% if order.status == 2  %}
                        <div class="col">
                            <button type="button" name="{{order.id}}" data-order_id="{{order.id}}" id="{{order.id}}" class="btn btn-primary btn-lg confirm">Confirm Received</button>
                        </div>
                        {% endif %}
                    </div>
                    {% if order.buyer_message and order.buyer_message != "" %}
                    <hr>
                    <div class="row justify-content-center">
                      <div class="form-group justify-content-center" style="width: 90%;">
                          <label>My message to seller</label>
                          <textarea class="form-control" disabled rows="3">{{order.buyer_message}}</textarea>
                      </div>
                    </div>
                    {% endif %}
                  </li>
                    {% endfor %}
                    {% endif %}

              </ul>
        </div>
      </div>
    </div>
  </div>

</div>


{% if focus_on %}
<script type="text/javascript">
$('html, body, .container').animate(
{
scrollTop: $("[data-list_order_id={{focus_on}}]").offset().top-$("[data-list_order_id=232]").height()
},1500)
</script>
{% endif %}




<script type="text/javascript" src="{{url_for('static',filename='js/account.js')}}" ></script>




{% endblock %}