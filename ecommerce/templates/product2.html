{% extends "layout.html" %}
{% block content %}

<link href="{{url_for('static',filename='css/product2.css')}}" rel="stylesheet">


<script>
    product = { 'id' : parseInt("{{product.id}}"),
                'price' : parseFloat("{{product.price}}") };
</script>



<div id='cont_product' class="container dark-grey-text">
    <div class="row justify-content-center">
        <div class="col">
            <img id='product_img' class='product_img product_pic' src="{{product.picture}}">
        </div>
        <div class="col">
            {{product}}
            <p>Product name : <span id='name'>{{product.name}}</span></p>
            <p>Product desc : <span id='desc'>{{product.desc}}</span></p>
            <p>Brand : <span id='brand'>{{product.brand}}</span></p>
            <p>Seller : <span id='seller'>{{product.supplier.name}}</span> </p>
            <p>Price : <span id='price'>{{product.price | round(1)}}$</span> </p>
            <div class="form-group row order_tab">
                <div class="col form-group text-center">
                <label>qty</label>
                 <input id="qty" class="form-control text-center " placeholder="1" type="number" value="1">
                </div>
                    <div class="form-group col text-center">
                <label>Total</label>
                 <input id="total" class="form-control text-center " placeholder="$0" type="number" value="{{product.price | round(1)}}" disabled>
                </div>
                
                </div>
            <button id='buy_now' type="button" class="btn btn-success btn_radius" role="button">Buy Now</button>
            <button id='add_to_cart' type="button" class="btn btn-primary btn_radius" role="button">Add to cart</button>
        </div>
    </div>
    <hr>
    <div class="row justify-content-center">
        <div class="col-9">
            <h4 class="text-center">Additional information</h4>
            <p id='more_info'>{{product.Additional_information}}</p>
        </div>
    </div>
    <div class="row justify-content-center">
        <div class="col-9">
            <div class="row justify-content-center">
                <div class="col text-center">
                    <span id='stars'> {% if product.review_avg %} {{product.review_avg}} <i class="far fa-star" aria-hidden="true"></i> ,  {{product.review_count}} Reviews {% else %} No Reviews yet  {% endif %} </span>
                </div>
                <div class="col text-center">
                    <p><span id='sold'>{{product.units_sold}}</span> Sold  </p>
                </div>
            </div>
        </div>
    </div>
    <hr>
    <div class="row justify-content-center">
        <div class="col-9 text-center">
            <h4 class="text-center">Pictures</h4>
            <img class='product_img product_pic big_product_imgs' src="{{product.picture}}">
        </div>
    </div>
    <hr>
    <div class="row justify-content-center">
        <div id='reviews' class="col-9">
            <div class="card">
                <div class="card-body">
                    <h4 class="card-title text-center">Reviews :</h4>
                </div>
                <ul class="list-group list-group-flush">
                    <div class="row font-weight-bold">
                        <div class="col text-center">By</div>
                        <div class="col text-center">Review</div>
                        <div class="col text-center">Rank</div>
                    </div>
                    {% if product.reviews %}
                    {% for review in product.reviews %}
                    <li class="list-group-item">
                        <div class="row">
                            <div class="col text-center">
                                <p>{{review.order.the_buyer.name}}</p>
                                <p>{{review.review_time.strftime("%d/%m/%y")}}</p>
                            </div>
                            <div class="col text-center">
                                {{review.review_content}}
                            </div>
                            <div class="col text-center">
                                {{review.stars}}<i class="far fa-star" aria-hidden="true"></i>
                            </div>
                        </div>
                         </li>
                    {% endfor %}
                    {% endif %}
                </ul>
            </div>

            
        </div>
    </div>



    <div class="modal fade" id="cart_success" tabindex="-1" role="dialog" aria-labelledby="cart_success" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLongTitle">Item Added to your Shopping Cart

            </h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
                A new item has been added to your Shopping Cart. You now have <span id='items_count'></span> items in your Shopping Cart.

            </div>
            <div class="modal-footer justify-content-around">
                <a href="/my_cart"> <button id='continue_shopping' type="button" class="btn btn-danger btn_radius" data-dismiss="modal">View Shopping Cart</button> </a>
               <button id='View_Shopping_Cart' type="button" class="btn btn-outline-primary btn_radius">Continue Shopping</button> 
            </div>
          </div>
        </div>
      </div>


</div>




{% include 'index/buy_now_modal.html' %}







<script type="text/javascript" src="{{url_for('static',filename='js/product/product.js')}}" ></script>
<script type="text/javascript" src="{{url_for('static',filename='js/product/buy_now_modal.js')}}" ></script>

{% endblock %}